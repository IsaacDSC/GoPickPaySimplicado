DROP TABLE IF EXISTS "transaction";
DROP TABLE IF EXISTS "user";

CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TABLE IF NOT EXISTS "user" (
  id UUID PRIMARY KEY NOT NULL,
  complete_name VARCHAR(255),
  cpf_cnpj VARCHAR(100) UNIQUE NOT NULL,
  type_user VARCHAR(100) NOT NULL,
  email VARCHAR(160) UNIQUE NOT NULL,
  password VARCHAR(255),
  updated_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS "transaction" (
  id UUID PRIMARY KEY NOT NULL,
  user_id  UUID NOT NULL,
  value VARCHAR(255) NOT NULL,
  operation VARCHAR(100),
  status VARCHAR(100) NOT NULL DEFAULT 'CREATED',
  updated_at TIMESTAMPTZ,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  CONSTRAINT fk_user_id FOREIGN KEY(user_id) REFERENCES "user"(id)
);